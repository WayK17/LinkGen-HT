<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&family=Inter%3Awght%40400%3B500%3B700%3B900&family=Noto+Sans%3Awght%40400%3B500%3B700%3B900"
    />
    <title>Generador de Enlaces Mediafire</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  </head>
  <body>
    <div
      class="relative flex size-full min-h-screen flex-col bg-[#111418] dark justify-between group/design-root overflow-x-hidden"
      style='font-family: Inter, "Noto Sans", sans-serif;'
    >
      <div>
        <div class="@container">
          <div class="@[480px]:p-4">
            <div
              class="flex min-h-[480px] flex-col gap-6 bg-cover bg-center bg-no-repeat @[480px]:gap-8 @[480px]:rounded-xl items-center justify-center p-4"
              style='background-image: linear-gradient(rgba(0, 0, 0, 0.1) 0%, rgba(0, 0, 0, 0.4) 100%), url("https://images.unsplash.com/photo-1554302241-52b86d18f272?q=80&w=2070&auto=format&fit=crop");'
            >
              <div class="flex flex-col gap-2 text-center">
                <h1
                  class="text-white text-4xl font-black leading-tight tracking-[-0.033em] @[480px]:text-5xl @[480px]:font-black @[480px]:leading-tight @[480px]:tracking-[-0.033em]"
                >
                  Generador de Enlaces Directos Mediafire
                </h1>
                <h2 class="text-white text-sm font-normal leading-normal @[480px]:text-base @[480px]:font-normal @[480px]:leading-normal">
                  Convierte tus enlaces de Mediafire en enlaces de descarga directa para descargas más rápidas y sin anuncios.
                </h2>
              </div>
              <div class="w-full max-w-[480px] flex flex-col gap-4">
                <label class="flex flex-col min-w-40 h-14 w-full @[480px]:h-16">
                  <div class="flex w-full flex-1 items-stretch rounded-xl h-full">
                    <div
                      class="text-[#9cabba] flex border border-[#3b4754] bg-[#1b2127] items-center justify-center pl-[15px] rounded-l-xl border-r-0"
                    >
                      <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor" viewBox="0 0 256 256">
                        <path
                          d="M144,128a16,16,0,1,1-16-16A16,16,0,0,1,144,128ZM128,64a12,12,0,0,0-12,12V99.55a40,40,0,1,0,24,0V76A12,12,0,0,0,128,64Zm80,104a12,12,0,0,1-12,12H60a12,12,0,0,1,0-24h49.55a40,40,0,1,0,0-24H60a12,12,0,0,1,0-24h49.55a40,40,0,1,0,0-24H60a12,12,0,0,1,0-24h48a12,12,0,0,1,0,24h-3.55a40,40,0,0,0,0,72h3.55a12,12,0,0,1,12,12h48a12,12,0,0,1,12,12h16a12,12,0,0,1,0,24Zm-68,16a16,16,0,1,1,16-16A16,16,0,0,1,140,184Z"
                        ></path>
                      </svg>
                    </div>
                    <input
                      id="mediafireUrl"
                      placeholder="Pega tu enlace de Mediafire aquí..."
                      class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-white focus:outline-0 focus:ring-0 border border-[#3b4754] bg-[#1b2127] focus:border-[#3b4754] h-full placeholder:text-[#9cabba] px-[15px] rounded-r-none border-r-0 pr-2 rounded-l-none border-l-0 pl-2 text-sm font-normal leading-normal @[480px]:text-base @[480px]:font-normal @[480px]:leading-normal"
                    />
                    <div class="flex items-center justify-center rounded-r-xl border-l-0 border border-[#3b4754] bg-[#1b2127] pr-[7px]">
                      <button
                        onclick="generarEnlace()"
                        class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 px-4 @[480px]:h-12 @[480px]:px-5 bg-[#0a65c1] hover:bg-[#0d79e4] transition-colors text-white text-sm font-bold leading-normal tracking-[0.015em] @[480px]:text-base @[480px]:font-bold @[480px]:leading-normal @[480px]:tracking-[0.015em]"
                      >
                        <span class="truncate">Generar</span>
                      </button>
                    </div>
                  </div>
                </label>

                <div id="resultado" class="text-center text-base"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
            <div>
        <footer class="flex flex-col items-center gap-4 px-5 py-10 text-center @container">
          <a
            href="https://github.com/tu-usuario/tu-repositorio"
            target="_blank"
            rel="noopener noreferrer"
            class="text-[#9cabba] hover:text-white transition-colors duration-300"
            aria-label="Ver el repositorio en GitHub"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="28"
              height="28"
              fill="currentColor"
              viewBox="0 0 16 16"
            >
              <path
                d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8z"
              />
            </svg>
          </a>
          <p class="text-[#9cabba] text-base font-normal leading-normal">
            © 2025 Link Converter. Todos los derechos reservados.
          </p>
        </footer>
        <div class="h-5 bg-[#111418]"></div>
      </div>


        <script>
      async function generarEnlace() {
        const urlInput = document.getElementById('mediafireUrl');
        const resultadoDiv = document.getElementById('resultado');

        const url = urlInput.value;
        if (!url || !url.includes('mediafire.com')) {
          resultadoDiv.innerHTML = `<div class="p-3 rounded-xl bg-red-900 bg-opacity-50 border border-red-700 text-red-300">Por favor, introduce un enlace de Mediafire válido.</div>`;
          return;
        }

        resultadoDiv.innerHTML = `<div class="p-3 rounded-xl bg-gray-700 bg-opacity-50 text-gray-300">Generando enlace, por favor espera...</div>`;

        try {
          const apiUrl = `/api/mediafire?url=${encodeURIComponent(url)}`;
          const response = await fetch(apiUrl);
          const data = await response.json();

          // CORRECCIÓN 1: Se usa "data.directLink" que es lo que la API envía.
          if (response.ok && data.directLink) {
            // CORRECCIÓN 2: Se eliminaron las barras invertidas (\) innecesarias para arreglar la sintaxis.
            resultadoDiv.innerHTML = `
              <div class="p-4 rounded-xl bg-green-900 bg-opacity-50 border border-green-700 text-white flex flex-col items-center gap-3">
                  <span class="font-bold">¡Enlace generado con éxito!</span>
                  <input class="w-full bg-gray-900 text-green-300 rounded-lg p-2 border-gray-600 focus:outline-none focus:ring-2 focus:ring-green-500" readonly value="${data.directLink}" />
                  <button onclick="copiarAlPortapapeles('${data.directLink}')" class="w-full mt-2 rounded-lg bg-green-600 hover:bg-green-500 transition-colors py-2 px-4 font-semibold">Copiar Enlace</button>
              </div>
            `;
          } else {
            resultadoDiv.innerHTML = `<div class="p-3 rounded-xl bg-red-900 bg-opacity-50 border border-red-700 text-red-300">Error: ${data.error || 'No se pudo generar el enlace.'}</div>`;
          }
        } catch (error) {
          console.error('Error en fetch:', error);
          resultadoDiv.innerHTML = `<div class="p-3 rounded-xl bg-red-900 bg-opacity-50 border border-red-700 text-red-300">Error al conectar con el servidor. Inténtalo de nuevo.</div>`;
        }
      }

      function copiarAlPortapapeles(texto) {
        navigator.clipboard.writeText(texto).then(() => {
          alert('¡Enlace copiado al portapapeles!');
        }).catch(err => {
          console.error('Error al copiar:', err);
          alert('No se pudo copiar el enlace.');
        });
      }
    </script>
  </body>
</html>
